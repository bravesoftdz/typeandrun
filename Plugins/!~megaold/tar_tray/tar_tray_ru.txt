tar_tray 0.1beta
(c)  онстантин ‘ролов aka "Milez", 2005

ѕисать на
milezv@yandex.ru
или
kf@antora.ru

(первое - личное, потому предпочтительней писать на него)

‘айлы:
tar_tray.dll - сам плагин (а точнее интерфейс к TaR)
tar_tray_hook.dll - системый хук на Shell_NotifyIcon
tar_tray.txt - этот файлик :)

ѕлагин обеспечивает работу с системным треем через
перехват вызовов Shell_NotifyIcon.
ѕри этом были использованы библиотеки madCodeHook
и madRemote (http://www.madshi.net/), за что их автору
огромаднейшее спасибо.

ѕисано под Delphi 7.0.

 то-то может спросить: а почему не использовалс€ более
легальный метод через интерфейс ITrayIcons?
Ќу, причина тут проста: этот способ не работает в
оболочках, альтернативных Explorer'у (в частности
под LiteStep'ом (который € активно юзаю)
ITrayIcons выдавал 0 иконок).

ѕосле загрузки плагин рассылает broadcast-сообщение TaskbarCreated, 
в ответ на которое большинство нормальных прог должны
заново вызвать Shell_NotifyIcon (тут они и попадаютс€ :)

¬ообще говор€, так как плагин использует всесистемный хук, 
€ не принимаю никаких криков, вроде "у мен€ все зависло"
или "плагин мне отформатировал винт" :)
»спользуйте его на свой страх и риск: € не могу протестировать
его на всех возможных платформах.

—ам € запускал его на WinXP SP2 и он заработал вполне сносно.
ѕод Explorer и LiteStep.  роме того, автор mad*-библиотек
за€вл€ет совместимость их с Win95/98/ME, так что высока веро€тность, 
что и под них оно работать станет, хот€ сам € не провер€л.

“еперь о командах:

ѕлагин принимает команды

~trayl <icon>, ~traym <icon>, ~trayr <icon>
  - имитаци€ левого/среднего/правого клика на иконке
~traydl <icon>, ~traydm <icon>, ~traydr <icon>
  - то же, что и выше, но клик двойной
~trayt <icon>
  - кладет в консоль подсказку иконки (tooltip)
~trayR - перегрузка кеша иконок (кеш очищаетс€ и
  снова рассылаетс€ всесистемный зов "TaskbarCreated")
  
~trayd эквивалентно ~traydl, а ~tray - ~trayr.

  <icon> здесь (оно, кстати, автодополн€етс€) - это id иконки
  в виде <iconid>:<modulename>
  
»стори€:

—обственно, пока писать нечего.
0.1beta - бета и есть. –аботает - и слава Ѕогу! :)

